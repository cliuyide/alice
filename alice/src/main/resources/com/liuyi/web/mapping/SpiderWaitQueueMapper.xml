<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.liuyi.web.mapping.SpiderMapperInterface">
	<insert id="insertNewUrl" parameterType="com.liuyi.web.model.SpiderWaitQueue">
		insert into spider_waitqueue (id, url, isdownload)
		values (#{id,jdbcType=CHAR}, #{url,jdbcType=VARCHAR},#{isDownload,jdbcType=INTEGER})
	</insert>
	<update id="updateDownloadUrl" parameterType="com.liuyi.web.model.SpiderWaitQueue" >
	    update spider_waitqueue
	    <set >
	      <if test="url != null" >
	        url = #{url,jdbcType=VARCHAR},
	      </if>
	      <if test="isDownload != null" >
	        isdownload = #{isDownload,jdbcType=INTEGER},
	      </if>
	      <if test="downpath != null" >
	        downpath = #{downpath,jdbcType=INTEGER},
	      </if>
	    </set>
	    where url = #{url,jdbcType=CHAR}
	 </update>
	 <select id="selectWaitUrl" resultType="String" >
	    select DISTINCT 
	    url
	    from spider_waitqueue
	    where isdownload=0
	 </select>
</mapper>